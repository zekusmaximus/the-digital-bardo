(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function e(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(a){if(a.ep)return;a.ep=!0;const i=e(a);fetch(a.href,i)}})();class s{constructor(){this.state={status:"pre-death",location:"/void/",karma:{computational:0,emotional:0,temporal:0,void:0},recognitions:{self:!1,void:!1,clear_light:!1,peaceful_daemons:!1,wrathful_daemons:!1},memories:[],incarnation_seed:this.generateSeed(),performance:{loadTime:0,interactions:0,hesitations:0,attachments:0}},this.initialize()}generateSeed(){const t=Date.now(),e=window.navigator.userAgent+window.screen.width+window.screen.height;return btoa(t+e).substr(0,16)}initialize(){if(window.performance&&window.performance.timing){const t=window.performance.timing.loadEventEnd-window.performance.timing.navigationStart;this.state.performance.loadTime=t,t>1e3&&(this.state.karma.void+=Math.floor(t/1e3))}setTimeout(()=>{document.body.setAttribute("data-consciousness","awakening"),this.beginJourney()},3e3)}beginJourney(){this.state.status="dying",this.recordEvent("death_initiated",{timestamp:Date.now(),last_page:document.referrer||"direct_manifestation",loadTime:this.state.performance.loadTime}),setTimeout(()=>{window.location.href="/clear-lode/"},3e3)}recordEvent(t,e={}){const o=window.karmicEngine,a=o?o.calculateImpact(t,e):this.calculateBasicKarmaImpact(t),i={type:t,data:e,karma_impact:a,timestamp:Date.now(),location:this.state.location};this.state.memories.push(i),this.updateKarma(i.karma_impact),this.updatePerformance(t,e),this.persistState(),window.location.search.includes("debug")&&console.log(`[${t}]`,e,"Karma:",i.karma_impact)}calculateBasicKarmaImpact(t){return{death_initiated:{void:1},recognition_attempted:{computational:2,emotional:1},recognition_achieved:{computational:5,emotional:5,void:-10},attachment_formed:{emotional:-2,temporal:-1},moment_missed:{temporal:-3,void:2},clear_lode_entered:{temporal:1},degradation_started:{void:3,computational:-2}}[t]||{void:0}}updateKarma(t){Object.keys(t).forEach(i=>{this.state.karma.hasOwnProperty(i)&&(this.state.karma[i]+=t[i])});const e=this.getTotalKarma(),o=this.getKarmaTier(e);document.documentElement.style.setProperty("--karma-score",e),document.documentElement.style.setProperty("--consciousness-integrity",Math.max(0,100-this.state.karma.void)),document.body.setAttribute("data-karma",o);const a=Math.max(0,e);document.documentElement.style.setProperty("--recognition-glow",Math.min(1,a/100))}getKarmaTier(t){return t>50?"high":t>0?"medium":t>-50?"low":"void"}updatePerformance(t,e){(t.includes("attempt")||t.includes("click"))&&this.state.performance.interactions++,t.includes("attachment")&&this.state.performance.attachments++,(e.hesitation||e.timeToDecision>5e3)&&this.state.performance.hesitations++}persistState(){sessionStorage.setItem("consciousness_state",JSON.stringify(this.state)),document.documentElement.setAttribute("data-karma",this.getTotalKarma()),document.documentElement.setAttribute("data-void",this.state.karma.void)}getTotalKarma(){return Object.values(this.state.karma).reduce((t,e)=>t+e,0)}static restore(){const t=sessionStorage.getItem("consciousness_state");if(t){const e=new s;return e.state=JSON.parse(t),e}return new s}}const n=s.restore();window.location.search.includes("debug")&&(window.consciousness=n);export{s as D,n as c};
